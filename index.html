<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'" />
	<meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'" />
	<link rel="stylesheet" href="style.css">
	<title>Copy to prompt</title>
</head>

<body>
	<div class="combobox-container">
		<input type="text" id="combo" placeholder="Type something..." autocomplete="off" />
		<ul class="suggestions" id="suggestions"></ul>
	</div>

	<script>
		const items = ["Apple", "Banana", "Orange", "Grape", "Strawberry", "Watermelon", "Blueberry"];
		const input = document.getElementById("combo");
		const suggestions = document.getElementById("suggestions");
		let selectedIndex = -1;

		function updateSuggestions() {
			const value = input.value.toLowerCase();
			suggestions.innerHTML = "";
			const filtered = items.filter(item => item.toLowerCase().includes(value));
			filtered.forEach((item, index) => {
				const li = document.createElement("li");
				li.textContent = item;
				li.className = index === selectedIndex ? "active" : "";
				li.addEventListener("click", () => {
					input.value = item;
					suggestions.innerHTML = "";
				});
				suggestions.appendChild(li);
			});
		}

		input.addEventListener("input", () => {
			selectedIndex = -1;
			updateSuggestions();
		});

		input.addEventListener("keydown", (e) => {
			const lis = suggestions.querySelectorAll("li");
			if (e.key === "ArrowDown") {
				selectedIndex = (selectedIndex + 1) % lis.length;
				updateSuggestions();
				e.preventDefault();
			} else if (e.key === "ArrowUp") {
				selectedIndex = (selectedIndex - 1 + lis.length) % lis.length;
				updateSuggestions();
				e.preventDefault();
			} else if (e.key === "Enter") {
				if (selectedIndex >= 0 && lis.length > 0) {
					input.value = lis[selectedIndex].textContent;
					suggestions.innerHTML = "";
				}
			} else if (e.key === "Escape") {
				suggestions.innerHTML = "";
			}
		});

		input.addEventListener("blur", () => {
			setTimeout(() => suggestions.innerHTML = "", 100);
		});
	</script>
</body>

</html>